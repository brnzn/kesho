Sally Crompton
password

need to create user for local host full access

create database kesho;
grant all privileges on kesho.* to admin@localhost;

create table FAMILY (
  ID bigint primary key AUTO_INCREMENT,
  FAMILY_NAME varchar(50) NOT NULL,
  HOME_LOCATION varchar(20) DEFAULT NULL,
  LIVE_PARENTS smallint(6) unsigned DEFAULT NULL,
  MARTIAL_STATUS varchar(10) DEFAULT NULL,
  PRIMARY_CARETAKER varchar(20) DEFAULT NULL
)

CREATE TABLE STUDENTS (
  ID bigint(20) NOT NULL AUTO_INCREMENT,
  NAME varchar(20) DEFAULT NULL,
  FAMILY_ID bigint NOT NULL,
  GENDER char(1) DEFAULT NULL,
  YEAR_OF_BIRTH smallint(6) unsigned DEFAULT NULL COMMENT 'YYYY',
  DISABILITY tinyint(1) unsigned DEFAULT NULL,
  CONTACT_NUMBER varchar(15) DEFAULT NULL,
  HOME_LOCATION varchar(20) DEFAULT NULL,
  CURRENT_STUDENT tinyint(1) unsigned DEFAULT NULL COMMENT 'YES/NO',
  STUDENT_STATUS varchar(10) DEFAULT NULL COMMENT 'Map codes to enum with text',
  SPONSORED tinyint(1) unsigned DEFAULT NULL COMMENT 'Yes / No / On hold',
  SPONSORSHIP_STATUS varchar(10) DEFAULT NULL,
  EMAIL varchar(40) DEFAULT NULL,
  FACEBOOK varchar(40) DEFAULT NULL,
  START_DATE date DEFAULT NULL,
  LEVEL_OF_SUPPORT varchar(20) DEFAULT NULL COMMENT 'Kesho agreed level of Financial Support',
  TOPUP_NEEDED tinyint(1) unsigned DEFAULT NULL,
  SHORTFALL int(10) unsigned DEFAULT NULL,
  ALUMNI_MEMBER int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (ID),
  foreign key FAMILY_STUDENT_FK (FAMILY_ID) REFERENCES FAMILY(ID)

)

Alumni Member	Yes    No    n/a

create table SCHOOLS (
  ID bigint primary key AUTO_INCREMENT,
  NAME varchar(50),
  UNIQUE KEY unique_school_name (NAME)
)

create table EDUCATION_HISTORY (
  ID bigint primary key AUTO_INCREMENT,
  STUDENT_ID bigint NOT NULL,
  SCHOOL_ID bigint NOT NULL,
  LEVEL varchar(20) DEFAULT NULL,
  CLASS int(10) unsigned DEFAULT NULL,
  START_DATE DATE NOT NULL,
  COURSE varchar(15) DEFAULT NULL,
  SECONDARY_LEVEL_1 varchar(40) DEFAULT NULL,
  SECONDARY_LEVEL_2 varchar(40) DEFAULT NULL,
  COMMENTS varchar(100) DEFAULT NULL,
	foreign key EDUCATION_HISTORY_STUDENTS_FK (STUDENT_ID) REFERENCES STUDENTS(ID),
	foreign key EDUCATION_HISTORY_SCHOOL_FK (SCHOOL_ID) REFERENCES SCHOOLS(ID)  
)

create table STUDENT_LOG (
  ID bigint primary key AUTO_INCREMENT,
  CREATED_DATE DATE NOT NULL,
  STUDENT_ID bigint,
  LOG varchar(250),
	foreign key STUDENT_LOG_STUDENTS_FK (STUDENT_ID) REFERENCES STUDENTS(ID)
)

create table CURRENCY (
  ID bigint primary key AUTO_INCREMENT,
  CURRENCY varchar(20),
  UNIQUE KEY unique_currency (CURRENCY)
)

create table ACCOUNT(
  ID bigint primary key AUTO_INCREMENT,
  ACCOUNT_NAME varchar(20),
  UNIQUE KEY unique_account (ACCOUNT_NAME)
)

create table PAYMENT_METHOD (
  ID bigint primary key AUTO_INCREMENT,
  PAYMENT_METHOD varchar(20),
  UNIQUE KEY unique_payment_method (PAYMENT_METHOD)
)


do we have more than one contact details and address 
create table SPONSORS (
  ID bigint primary key AUTO_INCREMENT,
  NAME varchar(20),
  SURNAME varchar(20),
  ADDRESS_LINE_1 varchar(50),
  ADDRESS_LINE_2 varchar(50),
  ADDRESS_LINE_3 varchar(50),
  COUNTY varchar(20),
  POSTCODE varchar(10),
  COUNTRY varchar(20),
    PAYEE_TYPE varchar(15),
    HOW_SPONSOR_FOUND_US varchar(15),
    ANONYMOUS BIT DEFAULT 0,
    ACTIVE BIT DEFAULT 0,
  START_DATE date DEFAULT NULL,
  END_DATE date DEFAULT NULL,
  LEVEL_OF_PARTICIPATION varchar(15) DEFAULT NULL,
  PHONE varchar(20) DEFAULT NULL,
  EMAIL1 varchar(30) DEFAULT NULL,
    EMAIL2 varchar(30) DEFAULT NULL,
)


create table SPONSOR_LOG (
  ID bigint primary key AUTO_INCREMENT,
  CREATED_DATE DATE NOT NULL,
  SPONSOR_ID bigint,
  LOG varchar(250),
	foreign key STUDENT_LOG_SPONSORS_FK (SPONSOR_ID) REFERENCES SPONSORS(ID)
)

create table SPONSOR_COMMITMENTS (
  ID bigint primary key AUTO_INCREMENT,
  SPONSOR_ID bigint,
  STUDENT_ID bigint,
  START_DATE DATE,
  END_DATE DATE,
	foreign key SPONSOR_COMMITMENTS_SPONSOR_FK (SPONSOR_ID) REFERENCES SPONSORS(ID),
	foreign key SPONSOR_COMMITMENTS_STUDENTS_FK (STUDENT_ID) REFERENCES STUDENTS(ID),
  UNIQUE KEY unique_SPONSOR_COMMITMENT_STUDENT (SPONSOR_ID,STUDENT_ID)
)

create table PAYMENT_ARRANGEMENTS (
  ID bigint primary key AUTO_INCREMENT,
  SPONSOR_ID bigint,
  START_DATE DATE,
  END_DATE DATE,
  FREQUENCY varchar(20),
  AMOUNT decimal(19,6),
	CURRENCY_ID bigint,
	ACCOUNT_ID bigint,
	foreign key PAYMENT_ARRANGEMENTS_ACCOUNT_FK (ACCOUNT_ID) REFERENCES ACCOUNT(ID),  
	foreign key PAYMENT_ARRANGEMENTS_SPONSOR_FK (SPONSOR_ID) REFERENCES SPONSORS(ID),
	foreign key PAYMENT_ARRANGEMENTS_CURRENCY_FK (CURRENCY_ID) REFERENCES CURRENCY(ID)  
)

create table TRANSACTIONS (
  ID bigint primary key AUTO_INCREMENT,
  SPONSOR_ID bigint,
  DATE DATE,
  TYPE varchar(20),
	ACCOUNT_ID bigint,
  REFERENCE varchar(100),
  CATEGORY varchar(30),
  AMOUNT decimal(19,6),
  YEAR bigint(4),
	PAYMENT_METHOD_ID bigint,
  	CURRENCY_ID bigint,
  RECONCILED BIT DEFAULT 0, 
	foreign key TRANSACTIONS_SPONSOR_FK (SPONSOR_ID) REFERENCES SPONSORS(ID),
	foreign key TRANSACTIONS_ACCOUNT_FK (ACCOUNT_ID) REFERENCES ACCOUNT(ID),  
	foreign key TRANSACTIONS_PAYMENT_METHOD_FK (PAYMENT_METHOD_ID) REFERENCES PAYMENT_METHOD(ID)
)



